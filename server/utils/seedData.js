import mongoose from 'mongoose';
import dotenv from 'dotenv';
import config from '../config.js';
import Employee from '../models/Employee.js';
import User from '../models/User.js';

dotenv.config();

const sampleEmployees = [
  {
    الرقم_المدني: "1234567890",
    الاسم: "أحمد علي محمد",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "دائرة الموارد البشرية",
      "الوزير"
    ],
    الوظيفة: "مدير دائرة الموارد البشرية (ب)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1977-04-02"),
    الدرجة: "5",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الخوير",
    تاريخ_التعيين: new Date("2002-06-11"),
    المجموعة_النوعية_للوظائف: "الإدارية",
    تاريخ_شغل_الدرجة: new Date("2025-06-29"),
    تاريخ_شغل_الوظيفة: new Date("2025-02-02"),
    رقم_الهاتف: "+966501234567"
  },
  {
    الرقم_المدني: "9876543210",
    الاسم: "فاطمة أحمد حسن",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم المهمات والإجازات",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم المهمات والإجازات (ب)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1980-01-01"),
    الدرجة: "7",
    منطقة_العمل: "مسقط",
    مقر_العمل: "مطرح",
    تاريخ_التعيين: new Date("2011-07-09"),
    المجموعة_النوعية_للوظائف: "الإحصاء ونظم المعلومات",
    تاريخ_شغل_الدرجة: new Date("2025-04-01"),
    تاريخ_شغل_الوظيفة: new Date("2025-02-02"),
    رقم_الهاتف: "+966559876543"
  },
  {
    الرقم_المدني: "4567891230",
    الاسم: "محمد سعد الغامدي",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم التوظيف",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم التوظيف (أ)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1982-03-15"),
    الدرجة: "6",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الوطية",
    تاريخ_التعيين: new Date("2015-09-01"),
    المجموعة_النوعية_للوظائف: "الموارد البشرية",
    تاريخ_شغل_الدرجة: new Date("2024-12-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-08-15"),
    رقم_الهاتف: "+966531112233"
  },
  {
    الرقم_المدني: "7891234560",
    الاسم: "نورا خالد العتيبي",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم التدريب والتطوير",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم التدريب والتطوير (أ)",
    الجنس: "أنثى",
    تاريخ_الميلاد: new Date("1985-07-20"),
    الدرجة: "5",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الغبرة",
    تاريخ_التعيين: new Date("2013-03-01"),
    المجموعة_النوعية_للوظائف: "الموارد البشرية",
    تاريخ_شغل_الدرجة: new Date("2024-10-15"),
    تاريخ_شغل_الوظيفة: new Date("2024-06-01"),
    رقم_الهاتف: "+966544556677"
  },
  {
    الرقم_المدني: "3216549870",
    الاسم: "سارة عبدالله المطيري",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم الرواتب والمزايا",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم الرواتب والمزايا (أ)",
    الجنس: "أنثى",
    تاريخ_الميلاد: new Date("1988-11-10"),
    الدرجة: "6",
    منطقة_العمل: "مسقط",
    مقر_العمل: "السيب",
    تاريخ_التعيين: new Date("2016-01-15"),
    المجموعة_النوعية_للوظائف: "المالية",
    تاريخ_شغل_الدرجة: new Date("2024-09-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-05-01"),
    رقم_الهاتف: "+966566778899"
  },
  {
    الرقم_المدني: "5556667770",
    الاسم: "علي حسن الزهراني",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم نظم المعلومات",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم نظم المعلومات (أ)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1983-09-05"),
    الدرجة: "4",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الخوير",
    تاريخ_التعيين: new Date("2010-12-01"),
    المجموعة_النوعية_للوظائف: "الإحصاء ونظم المعلومات",
    تاريخ_شغل_الدرجة: new Date("2024-07-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-03-01")
    // No phone number for testing fallback
  },
  {
    الرقم_المدني: "1112223330",
    الاسم: "خالد محمد العماني",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم التطوير التنظيمي",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم التطوير التنظيمي (أ)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1981-05-15"),
    الدرجة: "5",
    منطقة_العمل: "مسقط",
    مقر_العمل: "مطرح",
    تاريخ_التعيين: new Date("2012-08-01"),
    المجموعة_النوعية_للوظائف: "الموارد البشرية",
    تاريخ_شغل_الدرجة: new Date("2024-11-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-09-01"),
    رقم_الهاتف: "91234567"
  },
  {
    الرقم_المدني: "2223334440",
    الاسم: "مريم أحمد السعيدي",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم العلاقات العامة",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم العلاقات العامة (أ)",
    الجنس: "أنثى",
    تاريخ_الميلاد: new Date("1986-12-20"),
    الدرجة: "6",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الوطية",
    تاريخ_التعيين: new Date("2014-03-15"),
    المجموعة_النوعية_للوظائف: "الإدارية",
    تاريخ_شغل_الدرجة: new Date("2024-08-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-04-01"),
    رقم_الهاتف: "92345678"
  },
  {
    الرقم_المدني: "3334445550",
    الاسم: "عبدالله سالم البوسعيدي",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم الأمن والسلامة",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم الأمن والسلامة (أ)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1984-07-10"),
    الدرجة: "5",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الغبرة",
    تاريخ_التعيين: new Date("2011-11-01"),
    المجموعة_النوعية_للوظائف: "الإدارية",
    تاريخ_شغل_الدرجة: new Date("2024-06-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-02-01"),
    رقم_الهاتف: "93456789"
  },
  {
    الرقم_المدني: "4445556660",
    الاسم: "فاطمة علي النبهاني",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم الشؤون القانونية",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم الشؤون القانونية (أ)",
    الجنس: "أنثى",
    تاريخ_الميلاد: new Date("1987-03-25"),
    الدرجة: "7",
    منطقة_العمل: "مسقط",
    مقر_العمل: "السيب",
    تاريخ_التعيين: new Date("2015-06-01"),
    المجموعة_النوعية_للوظائف: "الإدارية",
    تاريخ_شغل_الدرجة: new Date("2024-12-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-10-01"),
    رقم_الهاتف: "94567890"
  },
  {
    الرقم_المدني: "5556667771",
    الاسم: "محمد عبدالله الحارثي",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم التخطيط الاستراتيجي",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم التخطيط الاستراتيجي (أ)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1980-11-08"),
    الدرجة: "6",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الخوير",
    تاريخ_التعيين: new Date("2013-01-01"),
    المجموعة_النوعية_للوظائف: "الإحصاء ونظم المعلومات",
    تاريخ_شغل_الدرجة: new Date("2024-05-01"),
    تاريخ_شغل_الوظيفة: new Date("2024-01-01"),
    رقم_الهاتف: "95678901"
  },
  {
    الرقم_المدني: "6667778880",
    الاسم: "آمنة خالد الراشدي",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم الجودة والتميز",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم الجودة والتميز (أ)",
    الجنس: "أنثى",
    تاريخ_الميلاد: new Date("1989-09-12"),
    الدرجة: "5",
    منطقة_العمل: "مسقط",
    مقر_العمل: "مطرح",
    تاريخ_التعيين: new Date("2017-04-01"),
    المجموعة_النوعية_للوظائف: "الموارد البشرية",
    تاريخ_شغل_الدرجة: new Date("2024-03-01"),
    تاريخ_شغل_الوظيفة: new Date("2023-12-01"),
    رقم_الهاتف: "96789012"
  },
  {
    الرقم_المدني: "7778889990",
    الاسم: "سعيد أحمد المزيني",
    موقع_العمل: [
      "المديرية العامة للشؤون الادارية والمالية",
      "دائرة الموارد البشرية",
      "قسم الشؤون المالية",
      "الوزير"
    ],
    الوظيفة: "رئيس قسم الشؤون المالية (أ)",
    الجنس: "ذكر",
    تاريخ_الميلاد: new Date("1982-02-18"),
    الدرجة: "6",
    منطقة_العمل: "مسقط",
    مقر_العمل: "الوطية",
    تاريخ_التعيين: new Date("2016-07-01"),
    المجموعة_النوعية_للوظائف: "المالية",
    تاريخ_شغل_الدرجة: new Date("2024-01-01"),
    تاريخ_شغل_الوظيفة: new Date("2023-11-01"),
    رقم_الهاتف: "97890123"
  }
];

const sampleUsers = [
  {
    _id: "1234567890",
    email: "ahmed.ali@maren.gov.sa",
    password: "1234567890", // In production, this should be hashed
    role: "Employee",
    isActive: true
  },
  {
    _id: "9876543210",
    email: "fatima.ahmed@maren.gov.sa",
    password: "9876543210",
    role: "Employee",
    isActive: true
  },
  {
    _id: "4567891230",
    email: "mohammed.saad@maren.gov.sa",
    password: "4567891230",
    role: "Employee",
    isActive: true
  },
  {
    _id: "7891234560",
    email: "nora.khalid@maren.gov.sa",
    password: "7891234560",
    role: "Employee",
    isActive: true
  },
  {
    _id: "3216549870",
    email: "sara.abdullah@maren.gov.sa",
    password: "3216549870",
    role: "Employee",
    isActive: true
  },
  {
    _id: "HR001",
    email: "hr.admin@maren.gov.sa",
    password: "hr123456",
    role: "HR",
    isActive: true
  },
  {
    _id: "1112223330",
    email: "khalid.mohammed@maren.gov.om",
    password: "1112223330",
    role: "Employee",
    isActive: true
  },
  {
    _id: "2223334440",
    email: "maryam.ahmed@maren.gov.om",
    password: "2223334440",
    role: "Employee",
    isActive: true
  },
  {
    _id: "3334445550",
    email: "abdullah.salem@maren.gov.om",
    password: "3334445550",
    role: "Employee",
    isActive: true
  },
  {
    _id: "4445556660",
    email: "fatima.ali@maren.gov.om",
    password: "4445556660",
    role: "Employee",
    isActive: true
  },
  {
    _id: "5556667771",
    email: "mohammed.abdullah@maren.gov.om",
    password: "5556667771",
    role: "Employee",
    isActive: true
  },
  {
    _id: "6667778880",
    email: "amna.khalid@maren.gov.om",
    password: "6667778880",
    role: "Employee",
    isActive: true
  },
  {
    _id: "7778889990",
    email: "saeed.ahmed@maren.gov.om",
    password: "7778889990",
    role: "Employee",
    isActive: true
  }
];

const seedDatabase = async () => {
  try {
    // Connect to MongoDB
    await mongoose.connect(config.MONGO_URI);
    console.log('✅ Connected to MongoDB');

    // Clear existing data
    await Employee.deleteMany({});
    await User.deleteMany({});
    console.log('🗑️  Cleared existing data');

    // Insert sample users
    const createdUsers = await User.insertMany(sampleUsers);
    console.log(`✅ Created ${createdUsers.length} users`);

    // Insert sample employees
    const createdEmployees = await Employee.insertMany(sampleEmployees);
    console.log(`✅ Created ${createdEmployees.length} employees`);

    console.log('🎉 Database seeded successfully!');
    console.log('\n📊 Sample Data Summary:');
    console.log(`- Users: ${createdUsers.length}`);
    console.log(`- Employees: ${createdEmployees.length}`);
    console.log('\n🔑 Login Credentials:');
    console.log('HR Admin: hr.admin@maren.gov.sa / hr123456');
    console.log('Employee: ahmed.ali@maren.gov.sa / 1234567890');

  } catch (error) {
    console.error('❌ Error seeding database:', error);
  } finally {
    await mongoose.disconnect();
    console.log('🔌 Disconnected from MongoDB');
  }
};

// Run seeder if this file is executed directly
console.log('Starting seed script...');
seedDatabase().then(() => {
  console.log('Seed script completed');
  process.exit(0);
}).catch((error) => {
  console.error('Seed script failed:', error);
  process.exit(1);
});

export default seedDatabase;
